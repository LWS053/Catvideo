/*!
 * jQuery Scrollbox
 * (c) 2009-2013 Hunter Wu <hunter.wu@gmail.com>
 * MIT Licensed.
 *
 * http://github.com/wmh/jquery-scrollbox
 */
(function(a){a.fn.scrollbox=function(b){var c={linear:false,startDelay:2,delay:3,step:5,speed:32,switchItems:1,direction:"vertical",distance:"auto",autoPlay:true,onMouseOverPause:true,paused:false,queue:null};b=a.extend(c,b);b.scrollOffset=b.direction==="vertical"?"scrollTop":"scrollLeft";if(b.queue){b.queue=a("#"+b.queue)}return this.each(function(){var d=a(this),g,h=null,e=null,l=false,m,i,f,k,j;if(b.onMouseOverPause){d.bind("mouseover",function(){l=true});d.bind("mouseout",function(){l=false})}g=d.children("ul:first-child");k=function(){if(l){return}var q,o,p,n,r;q=g.children("li:first-child");n=b.distance!=="auto"?b.distance:b.direction==="vertical"?q.height():q.width();if(!b.linear){r=Math.max(3,parseInt((n-d[0][b.scrollOffset])*0.3,10));p=Math.min(d[0][b.scrollOffset]+r,n)}else{p=Math.min(d[0][b.scrollOffset]+b.step,n)}d[0][b.scrollOffset]=p;if(p>=n){for(o=0;o<b.switchItems;o++){if(b.queue&&b.queue.hasChildNodes()&&b.queue.getElementsByTagName("li").length>0){g.append(b.queue.getElementsByTagName("li")[0]);g.remove(g.children("li:first-child"))}else{g.append(g.children("li:first-child"))}}d[0][b.scrollOffset]=0;clearInterval(h);if(b.autoPlay){e=setTimeout(i,b.delay*1000)}}};j=function(){if(l){return}var q,o,s,p,n,r;if(d[0][b.scrollOffset]===0){s=g.children("li").length;for(o=0;o<b.switchItems;o++){g.children("li:last-child").insertBefore(g.children("li:first-child"))}q=d.children("li:first-child");n=b.distance!=="auto"?b.distance:b.direction==="vertical"?q.height():q.width();d[0][b.scrollOffset]=n}if(!b.linear){r=Math.max(3,parseInt(d[0][b.scrollOffset]*0.3,10));p=Math.max(d[0][b.scrollOffset]-r,0)}else{p=Math.max(d[0][b.scrollOffset]-b.step,0)}d[0][b.scrollOffset]=p;if(p===0){clearInterval(h);if(b.autoPlay){e=setTimeout(i,b.delay*1000)}}};i=function(){clearInterval(h);h=setInterval(k,b.speed)};m=function(){clearInterval(h);h=setInterval(j,b.speed)};f=function(n){b.delay=n||b.delay;clearTimeout(e);if(b.autoPlay){e=setTimeout(i,b.delay*1000)}};if(b.autoPlay){e=setTimeout(i,b.startDelay*1000)}d.bind("resetClock",function(n){f(n)});d.bind("forward",function(){clearTimeout(e);i()});d.bind("backward",function(){clearTimeout(e);m()});d.bind("speedUp",function(n){if(typeof n==="undefined"){n=Math.max(1,parseInt(b.speed/2,10))}b.speed=n});d.bind("speedDown",function(n){if(typeof n==="undefined"){n=b.speed*2}b.speed=n})})}}(jQuery));